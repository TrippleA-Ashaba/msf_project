{% extends 'base.html' %}
<!--  -->
{% block content %}
<style>
	.completed {
		text-decoration: line-through;
	}
</style>

<div class="container mt-5">
	<div class="row">
		<div class="col"></div>
		<div class="col-12 col-lg-8">
			<div class="card">
				<h1 class="text-center">TODO List</h1>
				<div class="card-body">
					<div x-data="{ todos:[], newTodo:'' }" x-init="todos = await (fetchTodos())">
						<div class="">
							<form class="d-flex gap-2" x-on:submit.prevent id="add-form">
								{% csrf_token %}
								<input
									class="form-control"
									type="text"
									name="title"
									placeholder="Enter todo item"
									x-model="newTodo" />

								<button
									class="btn btn-sm btn-primary"
									@click="todos.push({title:newTodo}),createTodo()">
									Add
								</button>
							</form>
						</div>

						<template x-for="todo in todos" :key="todo.id">
							<div class="mt-4 card bg-light p-2">
								<div
									class="form-check d-flex justify-content-between align-items-center">
									<div class="">
										<input
											class="form-check-input"
											type="checkbox"
											x-bind:checked="todo.completed" />
										<div
											class="mx-3"
											x-text="todo.title"
											x-bind:class="{'completed':todo.completed}"></div>
									</div>
									<div>
										<button class="btn btn-sm btn-outline-primary">Edit</button>
										<button class="btn btn-sm btn-danger">Delete</button>
									</div>
								</div>
							</div>
						</template>
					</div>
				</div>
			</div>
		</div>
		<div class="col"></div>
	</div>
</div>

{% endblock %}
